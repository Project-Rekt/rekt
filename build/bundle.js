var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function h(){return l(" ")}function f(){return l("")}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let p;function v(t){p=t}function y(){if(!p)throw new Error("Function called outside component initialization");return p}function g(){const t=y();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}function m(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const w=[],x=[],b=[],k=[],S=Promise.resolve();let E=!1;function A(t){b.push(t)}let T=!1;const P=new Set;function _(){if(!T){T=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];v(e),M(e.$$)}for(w.length=0;x.length;)x.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];P.has(e)||(P.add(e),e())}b.length=0}while(w.length);for(;k.length;)k.pop()();E=!1,T=!1,P.clear()}}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const $=new Set;let O;function j(){O={r:0,c:[],p:O}}function R(){O.r||r(O.c),O=O.p}function L(t,e){t&&t.i&&($.delete(t),t.i(e))}function I(t,e,n,r){if(t&&t.o){if($.has(t))return;$.add(t),O.c.push(()=>{$.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function C(t){t&&t.c()}function D(t,n,o){const{fragment:a,on_mount:s,on_destroy:u,after_update:c}=t.$$;a&&a.m(n,o),A(()=>{const n=s.map(e).filter(i);u?u.push(...n):r(n),t.$$.on_mount=[]}),c.forEach(A)}function N(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(w.push(t),E||(E=!0,S.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,i,o,a,s,c,l=[-1]){const h=p;v(e);const f=i.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:l};let y=!1;if(d.ctx=o?o(e,f,(t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(d.bound[t]&&d.bound[t](i),y&&X(e,t)),n}):[],d.update(),y=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(u)}else d.fragment&&d.fragment.c();i.intro&&L(e.$$.fragment),D(e,i.target,i.anchor),_()}v(h)}class B{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const F=[];function H(t,e){return{subscribe:G(t,e).subscribe}}function G(e,n=t){let r;const i=[];function a(t){if(o(e,t)&&(e=t,r)){const t=!F.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),F.push(n,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const u=[o,s];return i.push(u),1===i.length&&(r=n(a)||t),o(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function q(e,n,o){const s=!Array.isArray(e),u=s?[e]:e,c=n.length<2;return H(o,e=>{let o=!1;const l=[];let h=0,f=t;const d=()=>{if(h)return;f();const r=n(s?l[0]:l,e);c?e(r):f=i(r)?r:t},p=u.map((t,e)=>a(t,t=>{l[e]=t,h&=~(1<<e),o&&d()},()=>{h|=1<<e}));return o=!0,d(),function(){r(p),f()}})}function z(t){let e,n;var r=t[0];if(r){var i=new r({});i.$on("routeEvent",t[10])}return{c(){i&&C(i.$$.fragment),e=f()},m(t,r){i&&D(i,t,r),s(t,e,r),n=!0},p(t,n){if(r!==(r=t[0])){if(i){j();const t=i;I(t.$$.fragment,1,0,()=>{N(t,1)}),R()}r?((i=new r({})).$on("routeEvent",t[10]),C(i.$$.fragment),L(i.$$.fragment,1),D(i,e.parentNode,e)):i=null}},i(t){n||(i&&L(i.$$.fragment,t),n=!0)},o(t){i&&I(i.$$.fragment,t),n=!1},d(t){t&&u(e),i&&N(i,t)}}}function W(t){let e,n;var r=t[0];function i(t){return{props:{params:t[1]}}}if(r){var o=new r(i(t));o.$on("routeEvent",t[9])}return{c(){o&&C(o.$$.fragment),e=f()},m(t,r){o&&D(o,t,r),s(t,e,r),n=!0},p(t,n){const a={};if(2&n&&(a.params=t[1]),r!==(r=t[0])){if(o){j();const t=o;I(t.$$.fragment,1,0,()=>{N(t,1)}),R()}r?((o=new r(i(t))).$on("routeEvent",t[9]),C(o.$$.fragment),L(o.$$.fragment,1),D(o,e.parentNode,e)):o=null}else r&&o.$set(a)},i(t){n||(o&&L(o.$$.fragment,t),n=!0)},o(t){o&&I(o.$$.fragment,t),n=!1},d(t){t&&u(e),o&&N(o,t)}}}function U(t){let e,n,r,i;const o=[W,z],a=[];function c(t,e){return t[1]?0:1}return e=c(t),n=a[e]=o[e](t),{c(){n.c(),r=f()},m(t,n){a[e].m(t,n),s(t,r,n),i=!0},p(t,[i]){let s=e;e=c(t),e===s?a[e].p(t,i):(j(),I(a[s],1,1,()=>{a[s]=null}),R(),n=a[e],n||(n=a[e]=o[e](t),n.c()),L(n,1),n.m(r.parentNode,r))},i(t){i||(L(n),i=!0)},o(t){I(n),i=!1},d(t){a[e].d(t),t&&u(r)}}}function K(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const V=H(K(),(function(t){const e=()=>{t(K())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));q(V,t=>t.location),q(V,t=>t.querystring);function Z(e,n,r){let i,o=t;!function(t,e,n){t.$$.on_destroy.push(a(e,n))}(e,V,t=>r(4,i=t)),e.$$.on_destroy.push(()=>o());let{routes:s={}}=n,{prefix:u=""}=n;class c{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,o,a=[],s="",u=t.split("/");for(u[0]||u.shift();i=u.shift();)"*"===(n=i[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(t){u&&t.startsWith(u)&&(t=t.substr(u.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=e[++r]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const l=[];s instanceof Map?s.forEach((t,e)=>{l.push(new c(e,t))}):Object.keys(s).forEach(t=>{l.push(new c(t,s[t]))});let h=null,f=null;const d=g(),p=(t,e)=>{setTimeout(()=>{d(t,e)},0)};return e.$set=t=>{"routes"in t&&r(2,s=t.routes),"prefix"in t&&r(3,u=t.prefix)},e.$$.update=()=>{if(17&e.$$.dirty){r(0,h=null);let t=0;for(;!h&&t<l.length;){const e=l[t].match(i.location);if(e){const n={component:l[t].component,name:l[t].component.name,location:i.location,querystring:i.querystring,userData:l[t].userData};if(!l[t].checkConditions(n)){p("conditionsFailed",n);break}r(0,h=l[t].component),e&&"object"==typeof e&&Object.keys(e).length?r(1,f=e):r(1,f=null),p("routeLoaded",n)}t++}}},[h,f,s,u,i,c,l,d,p,function(t){m(e,t)},function(t){m(e,t)}]}class Q extends B{constructor(t){super(),Y(this,t,Z,U,o,{routes:2,prefix:3})}}function J(e){let n;return{c(){n=c("h1"),n.textContent="Hello World!"},m(t,e){s(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,e,n){return e&&et(t.prototype,e),n&&et(t,n),t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?ut(t):e}function lt(t){return function(){var e,n=ot(t);if(st()){var r=ot(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ct(this,e)}}function ht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ft(t,e){return t(e={exports:{}},e.exports),e.exports}var dt=ft((function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}}}));ht(dt);var pt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var vt=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},yt=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=dt(pt),r=dt(vt);e.default=function t(e,i){var o=this;(0,n.default)(this,t),(0,r.default)(this,"create",(function(){})),(0,r.default)(this,"render",(function(t){})),(0,r.default)(this,"update",(function(t){})),(0,r.default)(this,"destroy",(function(){o.ctx.clearRect(o.bounds.x,o.bounds.y,o.bounds.width,o.bounds.height),o.stage.removeActor(o)})),this.stage,this.ctx,this.name=i,this.bounds=e||{x:0,y:0,width:0,height:0}}}));ht(yt);var gt=ft((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var c={};function l(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(S([])));v&&v!==e&&n.call(v,i)&&(d=v);var y=f.prototype=l.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=y.constructor=f,f.constructor=h,f[a]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),m.prototype[o]=function(){return this},t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wt=function(t,e,n){return e&&mt(t.prototype,e),n&&mt(t,n),t},xt=ft((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var bt=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var kt=function(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?bt(t):e},St=ft((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}));var Et=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=St(t)););return t},At=ft((function(t){function e(n,r,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,n){var r=Et(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},e(n,r,i||n)}t.exports=e})),Tt=ft((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var Pt=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)};function _t(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}var Mt=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_t(o,r,i,a,s,"next",t)}function s(t){_t(o,r,i,a,s,"throw",t)}a(void 0)}))}},$t=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=dt(gt),r=dt(pt),i=dt(wt),o=dt(kt),a=dt(bt),s=dt(St),u=dt(At),c=dt(Pt),l=dt(vt),h=dt(Mt);function f(t){return d.apply(this,arguments)}function d(){return(d=(0,h.default)(n.default.mark((function t(e){var r;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Image).src=e,t.abrupt("return",new Promise((function(t,e){r.onload=function(){t(r)}})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=function(t){function e(t,i){var u;return(0,r.default)(this,e),u=(0,o.default)(this,(0,s.default)(e).call(this,t,i.name)),(0,l.default)((0,a.default)(u),"changeState",(function(t){u.currentState=t})),(0,l.default)((0,a.default)(u),"loadSpriteObj",(function(t){u.properties=t.properties,u.states=t.states,u.states!={}&&u.properties!={}&&(0,h.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object.keys(u.states).map(function(){var t=(0,h.default)(n.default.mark((function t(e){var r;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.states[e].location);case 2:r=t.sent,Object.assign(u.states[e],{image:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:console.log(u.states);case 3:case"end":return t.stop()}}),t)})))()})),(0,l.default)((0,a.default)(u),"create",(function(){u.states!={}&&u.properties!={}&&(0,h.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object.keys(u.states).map(function(){var t=(0,h.default)(n.default.mark((function t(e){var r;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.states[e].location);case 2:r=t.sent,Object.assign(u.states[e],{image:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:console.log(u.states);case 3:case"end":return t.stop()}}),t)})))()})),(0,l.default)((0,a.default)(u),"render",(function(t){u.ctx.clearRect(u.px,u.py,u.bounds.width*u.scale,u.bounds.height*u.scale);var e=u.states[u.currentState];u.renderCount+=t,u.renderCount>1e3/e.rps&&(u.renderCount=0,u.frameCount>=e.frames.length&&(u.frameCount=0,e.loop||u.changeState("idle")),u.frame=e.frames[u.frameCount],u.bounds.width=u.frame.width*u.scale,u.bounds.height=u.frame.height*u.scale,e.image&&(u.current=e.image),u.frameCount++),u.px=Math.round(u.bounds.x),u.py=Math.round(u.bounds.y),u.frame&&u.current&&u.ctx.drawImage(u.current,u.frame.x,u.frame.y,u.frame.width,u.frame.height,u.px,u.py,u.frame.width*u.scale,u.frame.height*u.scale)})),u.properties=i.properties||{},u.states=i.states||{idle:{location:null,rps:5,loop:!0,frames:[{x:0,y:0,width:0,height:0}]}},u.frames=i.frames,u.currentState=Object.keys(u.states)[0]||"idle",u.frameCount=0,u.renderCount=0,u.scale=1,u}return(0,c.default)(e,t),(0,i.default)(e,[{key:"destroy",value:function(){for(var t=0;t<Object.keys(this.states).length;t++)console.log(this.states[Object.keys(this.states)[t]]),this.states[Object.keys(this.states)[t]].image;(0,u.default)((0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(dt(yt).default);e.default=p}));ht($t);var Ot=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=dt(pt),r=dt(vt);e.default=function t(e){var i=this;(0,n.default)(this,t),(0,r.default)(this,"getCollisions",(function(t){var e=[],n=i;return Object.keys(i.children).forEach((function(r){n.children[r].forEach((function(r){n.checkCollision(r,t)&&r!==t&&e.push(r)}))})),e})),(0,r.default)(this,"checkCollision",(function(t,e){return t.bounds.x<e.bounds.x+e.bounds.width&&t.bounds.x+t.bounds.width>e.bounds.x&&t.bounds.y<e.bounds.y+e.bounds.height&&t.bounds.y+t.bounds.height>e.bounds.y})),(0,r.default)(this,"addActor",(function(t,e){e||(e=0),t.stage=i,t.ctx=i.ctx,t.zIndex=e,t.create(),i.children[e]||(i.children[e]=[]),i.children[e].push(t),i.exportList.push({name:t.name,x:t.bounds.x,y:t.bounds.y})})),(0,r.default)(this,"changeIndex",(function(t,e){for(var n=0;n<i.children.length;n++)if(i.children[n])for(var r=0;r<i.children[n].length;r++)if(i.children[n][r]&&i.children[n][r]===t)return delete i.children[n][r],i.children[e]||(i.children[e]=[]),i.children[e].push(t),void(t.zIndex=e)})),(0,r.default)(this,"removeActor",(function(t){var e=i.children[t.zIndex].findIndex((function(e){return e===t}));i.children[t.zIndex].splice(e,1)})),(0,r.default)(this,"callUpdateCycles",(function(){var t=Date.now();t-i.updateTimeStart>1e3/i.updateFPS&&(i.updateDeltaTime=t-i.updateTimeStart,i.updateCycles(i.updateDeltaTime),i.updateTimeStart=Date.now()),window.requestAnimationFrame(i.callUpdateCycles)})),(0,r.default)(this,"callRenderCycles",(function(){var t=Date.now();t-i.renderTimeStart>1e3/i.renderFPS&&(i.renderDeltaTime=t-i.renderTimeStart,i.renderCycles(i.renderDeltaTime),i.renderTimeStart=Date.now()),window.requestAnimationFrame(i.callRenderCycles)})),(0,r.default)(this,"create",(function(){})),(0,r.default)(this,"start",(function(){i.create(),window.requestAnimationFrame(i.callUpdateCycles),window.requestAnimationFrame(i.callRenderCycles)})),(0,r.default)(this,"stop",(function(){i.destroy(),window.cancelAnimationFrame(i.callUpdateCycles),window.cancelAnimationFrame(i.callRenderCycles)})),(0,r.default)(this,"render",(function(){})),(0,r.default)(this,"renderCycles",(function(t){i.render(),i.ctx.clearRect(0,0,i.width,i.height);var e=Object.keys(i.children);e.sort((function(t,e){return t-e})),e.forEach((function(e){this.children[e].forEach((function(e){e.render(t)}),this,t)}),i,t)})),(0,r.default)(this,"update",(function(){})),(0,r.default)(this,"updateCycles",(function(t){i.update();var e=Object.keys(i.children);e.sort((function(t,e){return t-e})),e.forEach((function(e){this.children[e].forEach((function(e){e.update(t)}),this,t)}),i,t)})),(0,r.default)(this,"destroy",(function(){})),this.ticks=0,this.updateFPS=200,this.updateTimeStart=Date.now(),this.updateDeltaTime=0,this.renderFPS=200,this.renderTimeStart=Date.now(),this.renderDeltaTime=0,this.elem=e,e||(this.elem=document.createElement("canvas"),document.querySelector("body").appendChild(this.elem)),this.ctx=this.elem.getContext("2d"),this.children=[],this.exportList=[]}}));ht(Ot);var jt=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=dt(pt),r=dt(wt),i=dt(vt),o=function(){function t(e,r){var o=this;(0,n.default)(this,t),(0,i.default)(this,"keyDown",(function(t){o.input.keys[t.code]=!0})),(0,i.default)(this,"keyUp",(function(t){o.input.keys[t.code]=!1})),(0,i.default)(this,"mouseDown",(function(t){o.input.mouse[t.button]=!0})),(0,i.default)(this,"mouseUp",(function(t){o.input.mouse[t.button]=!1})),(0,i.default)(this,"mouseMove",(function(t){o.input.x=t.clientX+o.offsetX,o.input.y=t.clientY-o.offsetY})),(0,i.default)(this,"startHandler",(function(){o.dynamicEvents={},Object.keys(o.events).forEach(function(t){var e=function(e){this.events[t].forEach(function(t){t.call(this,e)}.bind(this))}.bind(this);this.dynamicEvents[t]=e,this.elem.addEventListener(t,e)}.bind(o))})),(0,i.default)(this,"stopHandler",(function(){Object.keys(o.events).forEach((function(t){o.elem.removeEventListener(t,o.dynamicEvents[t])})),o.dynamicEvents={}})),this.elem=e,this.elemBounds=e.getBoundingClientRect(),this.offsetX=this.elemBounds.left,this.offsetY=this.elemBounds.top,this.input={keys:[],mouse:[],x:0,y:0},this.events={keydown:[this.keyDown],keyup:[this.keyUp],mousedown:[this.mouseDown],mouseup:[this.mouseUp],mousemove:[this.mouseMove]},r&&Object.keys(r).forEach(function(t){var e=this;this.events[t]?this.events[t]=this.events[t].concat(r[t].length?r[t].map((function(t){return t.bind(e)})):[r[t]]):this.events[t]=r[t].length?r[t].map((function(t){return t.bind(e)})):[r[t]]}.bind(this)),this.dynamicEvents={}}return(0,r.default)(t,[{key:"setEvents",value:function(t){Object.assign(this.events,t)}},{key:"keys",value:function(){return this.input.keys}},{key:"mouse",value:function(){return this.input.mouse}},{key:"mouseX",value:function(){return this.input.x}},{key:"mouseY",value:function(){return this.input.y}}]),t}();e.default=o}));ht(jt);var Rt=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteActor=e.InputHandler=e.Stage=e.Actor=e.default=void 0;var n=dt(yt),r=dt($t),i=dt(Ot),o=dt(jt),a={Actor:n.default,InputHandler:o.default,Stage:i.default,SpriteActor:r.default};e.default=a;var s=n.default,u=i.default,c=o.default,l=r.default;e.SpriteActor=l,e.InputHandler=c,e.Stage=u,e.Actor=s})),Lt=ht(Rt),It=(Rt.SpriteActor,Rt.InputHandler,Rt.Stage,Rt.Actor,function(t){it(n,t);var e=lt(n);function n(t){var r;return tt(this,n),rt(ut(r=e.call(this,t)),"render",(function(t){r.ctx.fillStyle="#000000",r.ctx.fillRect(r.bounds.x,r.bounds.y,r.bounds.width,r.bounds.height)})),r}return n}(Lt.Actor)),Ct=function(t){it(n,t);var e=lt(n);function n(t,r,i,o){var a;return tt(this,n),(a=e.call(this,t)).space=o,a.positionX=r,a.positionY=i,a.realX=50*(r+1)-25,a.realY=50*(i+1)-25,a.cost=0,a}return nt(n,[{key:"getSpace",value:function(){return null==this.space?[[1]]:this.space}}]),n}(Lt.Actor),Dt=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{},t,r,null)),"render",(function(t){i.ctx.fillStyle="#8F8F8F",i.ctx.fillRect(i.realX-25,i.realY-25,50,50),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("B",i.realX,i.realY+8)})),i}return n}(Ct),Nt=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{})),"render",(function(t){i.ctx.fillStyle="green",i.ctx.fillRect(i.realX-24,i.realY-24,50,50),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("E",i.realX,i.realY+10)})),i.x=t,i.y=t,i.realX=50*(t+1)-25,i.realY=50*(r+1)-25,i}return n}(Lt.Actor),Xt=function(t){it(n,t);var e=lt(n);function n(t){var r;return tt(this,n),rt(ut(r=e.call(this,t)),"render",(function(){r.ctx.fillStyle="white",r.ctx.fillRect(r.bounds.x,r.bounds.y,r.bounds.width,r.bounds.height)})),r}return n}(Lt.Actor);var Yt=function(t){it(n,t);var e=lt(n);function n(t,r,i,o,a){var s;return tt(this,n),rt(ut(s=e.call(this,t,a)),"update",(function(t){if(s.updateEffects(t),s.isDead())return s.active=!1,s.stage.enemyKilled(s.bounty),void s.destroyActor();!function t(e,n){if(0!=n&&!e.hasReachedGoal()){var r=e.getSpeed(),i=e.getPosition(),o=r*n,a=e.getPath()[e.getStep()+1],s=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2));if(s<=o){var u=(o-s)/r;return e.setDistance(e.getDistance()-s),e.setStep(e.getStep()+1),e.updatePosition(a),void t(e,u)}var c=0,l=0;if(i[0]-a[0]==0)c=o,i[1]-a[1]>0&&(c=-c);else if(i[1]-a[1]==0)l=o,i[0]-a[0]>0&&(l=-l);else{var h=Math.atan((i[0]-a[0])/(i[1]-a[1]));c=o*Math.cos(h),l=o*Math.sin(h)}var f=[i[0]+l,i[1]+c];e.updatePosition(f),e.setDistance(e.getDistance()-o)}}(ut(s),t),s.updateZIndex(),s.updateRealPosition(),s.hasReachedGoal()&&(s.active=!1,s.stage.enemyReachedGoal(),s.destroyActor())})),s.vertex=0,s.hp=r,s.maxHp=r,s.speed=i,s.def=o,s.distance=0,s.positionX=0,s.positionY=0,s.path=[],s.step=0,s.reachedGoal=!1,s.dead=!1,s.active=!0,s.id=0,s.px=Math.round(s.bounds.x),s.py=Math.round(s.bounds.y),s.effectsList=[],s.statRenew={hp:s.hp,speed:s.speed,def:s.def},s.bounty=1,s}return nt(n,[{key:"renew",value:function(t){console.log(this.statRenew),"hp"==t&&(this.hp=this.statRenew.hp),"speed"==t&&(this.speed=this.statRenew.speed),"def"==t&&(this.def=this.statRenew.def)}},{key:"scaleStats",value:function(t){this.maxHp=this.maxHp*t,this.hp=this.hp*t,this.def=this.def*t,this.bounty=Math.floor(this.bounty*t)}},{key:"updateEffects",value:function(t){for(var e=0;e<this.effectsList.length;e++)this.effectsList[e].time+=t,this.effectsList[e].time>=this.effectsList[e].effect.maxTime&&(this.renew(this.effectsList[e].effect.modifier),this.effectsList.pop(e))}},{key:"updateZIndex",value:function(){var t=9+this.positionY/600;this.stage.changeIndex(this,t)}},{key:"updateRealPosition",value:function(){this.bounds.x=50*this.positionX,this.bounds.y=50*this.positionY}},{key:"destroyActor",value:function(){this.ctx.clearRect(this.px,this.py,this.bounds.width*this.scale,this.bounds.height*this.scale),this.stage.removeActor(this),this.stage.removeActive(this)}},{key:"hasReachedGoal",value:function(){return this.reachedGoal=this.step+1>=this.path.length,this.reachedGoal}},{key:"setPath",value:function(t){this.path=t,this.step=0}},{key:"setStep",value:function(t){this.step=t}},{key:"takeDamage",value:function(t){this.hp;this.hp=this.hp-Math.max(t-this.def,1)}},{key:"healDamage",value:function(t){this.hp=this.hp+Math.min(this.hp+t,this.maxHp)}},{key:"updatePosition",value:function(t){this.positionX=t[1],this.positionY=t[0],this.updateRealPosition()}},{key:"setDistance",value:function(t){this.distance=t}},{key:"getHp",value:function(){return this.hp}},{key:"getSpeed",value:function(){return this.speed}},{key:"getDef",value:function(){return this.def}},{key:"getDistance",value:function(){return this.distance}},{key:"getPosition",value:function(){return[this.positionY,this.positionX]}},{key:"getPath",value:function(){return this.path}},{key:"getStep",value:function(){return this.step}},{key:"isDead",value:function(){return this.hp<=0}},{key:"edgePath",value:function(t){var e=!1,n=!1,r=[];t[0][0]==t[1][0]?n=!0:t[0][1]==t[1][1]&&(e=!0);for(var i=0;i<t.length-1;i++)n?t[i][0]!=t[i+1][0]&&(r.push(t[i]),n=!1,e=!0):e&&t[i][1]!=t[i+1][1]&&(r.push(t[i]),n=!0,e=!1);return r.push(t[t.length-1]),r}},{key:"isActive",value:function(){return this.active}}]),n}(Lt.SpriteActor),Bt=function(t){it(n,t);var e=lt(n);function n(t){var r;return tt(this,n),rt(ut(r=e.call(this,t)),"render",(function(t){r.ctx.fillStyle="blue",r.ctx.fillRect(r.bounds.x,r.bounds.y,r.bounds.width,r.bounds.height)})),r}return n}(Lt.Actor),Ft=function(){function t(){tt(this,t),this.graph=null,this.map=null,this.endpoints=null}return nt(t,[{key:"initializeGraph",value:function(t){this.graph=this.matrixToGraph(t),this.graph.wipeAllPathData()}},{key:"matrixToGraph",value:function(t){for(var e=new Gt,n=new Array(t.length),r=0;r<t.length;r++)n[r]=new Array(t[0].length);for(var i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++){var a=t[i][o];if(3==a&&(a=0),0==a||2==a){var s=new Ht(o,i,a);e.addNode(s),n[i][o]=s}}return this.connectAdjacents(n),e}},{key:"connectAdjacents",value:function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[0].length;n++){var r=t[e][n];void 0!==t[e][n]&&(n>0&&void 0!==t[e][n-1]&&r.adjacentNodes.push([t[e][n-1],1]),n<t[0].length-1&&void 0!==t[e][n+1]&&r.adjacentNodes.push([t[e][n+1],1]),e>0&&void 0!==t[e-1][n]&&r.adjacentNodes.push([t[e-1][n],1]),e<t.length-1&&void 0!==t[e+1][n]&&r.adjacentNodes.push([t[e+1][n],1]))}}},{key:"findShortestPathToEnds",value:function(t,e){this.graph.wipeAllPathData();var n=this.graph.getNode(t,e);this.findShortestPaths(n);var r=this.searchShortestPathToEnds();if(null==r)return null;var i=r.shortestPath;return i.push(r),this.convertPathToListOfLists(i)}},{key:"searchShortestPathToEnds",value:function(){for(var t=null,e=Number.MAX_SAFE_INTEGER,n=0;n<this.graph.nodes.length;n++){var r=this.graph.nodes[n];2==r.id&&r.distance<e&&(t=r,e=r.distance)}return null==t?null:t}},{key:"convertPathToListOfLists",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=[(r=t[n]).y,r.x];e.push(r)}return e}},{key:"findShortestPaths",value:function(t){t.setDistance(0);var e=[],n=[];for(e.push(t);0!=e.length;){var r=this.getLowestDistanceNode(e);e.splice(e.indexOf(r),1);for(var i=0;i<r.adjacentNodes.length;i++){var o=r.adjacentNodes[i][0],a=r.adjacentNodes[i][1];n.includes(o)||e.includes(o)||(this.calculateMinimumDistance(o,a,r),e.push(o))}n.push(r)}}},{key:"getLowestDistanceNode",value:function(t){for(var e=null,n=Number.MAX_SAFE_INTEGER,r=0;r<t.length;r++){var i=t[r].distance;i<n&&(n=i,e=t[r])}return e}},{key:"calculateMinimumDistance",value:function(t,e,n){var r=n.distance;if(r+e<t.distance){t.setDistance(r+e);for(var i=[],o=0;o<n.shortestPath.length;o++)i.push(n.shortestPath[o]);i.push(n),t.setShortestPath(i)}}}]),t}(),Ht=function(){function t(e,n,r){tt(this,t),this.distance=Number.MAX_SAFE_INTEGER,this.shortestPath=[],this.adjacentNodes=[],this.x=e,this.y=n,this.id=r}return nt(t,[{key:"setShortestPath",value:function(t){this.shortestPath=t}},{key:"setDistance",value:function(t){this.distance=t}}]),t}(),Gt=function(){function t(){tt(this,t),this.nodes=[]}return nt(t,[{key:"wipeAllPathData",value:function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.setShortestPath(e),e.distance=Number.MAX_SAFE_INTEGER}}},{key:"getNode",value:function(t,e){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n];if(r.x==t&&r.y==e)return r}return null}},{key:"addNode",value:function(t){this.nodes.push(t)}}]),t}(),qt=function(){function t(e){tt(this,t),this.element=document.createElement(e)}return nt(t,[{key:"applyStyles",value:function(t){Object.assign(this.element.style,t)}},{key:"changeText",value:function(t){this.text=t,this.element.textContent=t}}]),t}(),zt=function(t){it(n,t);var e=lt(n);function n(t,r,i,o,a,s){var u;return tt(this,n),(u=e.call(this,t,r,i,o,a)).alt=new qt("p"),u.alt.applyStyles({position:"fixed",top:"".concat(i+20,"px"),left:"".concat(r+26,"px"),display:"none",color:"grey"}),u.alt.changeText(s),u}return nt(n,[{key:"handler_onHover",value:function(){console.log("Hi!"),this.alt.applyStyles({display:"block"})}},{key:"handler_onExit",value:function(){console.log("Bye!"),this.alt.applyStyles({display:"none"})}},{key:"create",value:function(){this.gui.addInterface(this.alt)}},{key:"changeAltText",value:function(t){this.alt.changeText(t)}}]),n}(function(t){it(n,t);var e=lt(n);function n(t,r,i,o,a){var s;return tt(this,n),(s=e.call(this,"img")).element.src=t,s.changePosition(r,i),s.changeSize(o,a),s.element.style.zIndex="-1",s}return nt(n,[{key:"handler_onHover",value:function(){}},{key:"handler_onExit",value:function(){}},{key:"attachHandler",value:function(){this.element.removeEventListener("mouseover",this.handler_onHover),this.element.addEventListener("mouseover",this.handler_onHover.bind(this)),this.element.removeEventListener("mouseout",this.handler_onExit),this.element.addEventListener("mouseout",this.handler_onExit.bind(this))}},{key:"changePosition",value:function(t,e){this.applyStyles({position:"fixed",top:"".concat(e,"px"),left:"".concat(t,"px")})}},{key:"changeSize",value:function(t,e){this.applyStyles({width:"".concat(t,"px"),height:"".concat(e,"px")})}}]),n}(qt)),Wt=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{})),"update",(function(t){i.wallet.changeAltText(""+i.currency),i.lifeCounter.changeAltText(""+i.hp)})),i.currency=r,i.hp=t,i.blockerSelect=null,i.wallet=new zt("../spriteAssets/world/tear.png",100,600,80,80,""+i.currency),i.lifeCounter=new zt("../spriteAssets/world/heart.png",5,600,80,80,""+i.hp),i}return nt(n,[{key:"gainMoney",value:function(t){this.currency+=t}},{key:"spendMoney",value:function(t){this.currency-=t}},{key:"getMoney",value:function(){return this.currency}},{key:"getHp",value:function(){return this.hp}},{key:"damage",value:function(t){this.hp-=t,this.isDead()&&this.stage.playerKilled()}},{key:"isDead",value:function(){return this.hp<=0}}]),n}(Lt.Actor),Ut=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{})),"update",(function(t){i.spawnMobs(t)})),rt(ut(i),"render",(function(t){i.ctx.fillStyle="red",i.ctx.fillRect(i.realx-49,i.realy-49,49,49),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("S",i.realx-25,i.realy-15)})),i.positionX=t,i.positionY=r,i.realx=50*(t+1),i.realy=50*(r+1),i.path=[],i.mobs=[],i.spawned=[],i.startTime=0,i.distance=0,i.scaleFunction=null,i.scale=1,i}return nt(n,[{key:"setScaleFunction",value:function(t){this.scaleFunction=t}},{key:"updateScale",value:function(t){this.scale=this.scaleFunction(t)}},{key:"mobsExhausted",value:function(){if(0==this.mobs.length){for(var t=0;t<this.spawned.length;t++)if(this.spawned[t].isActive())
//!(this.spawned[i].isDead() || this.spawned[i].hasReachedGoal())){
return!1;return!0}return!1}},{key:"getPosition",value:function(){return[this.positionX,this.positionY]}},{key:"isEmpty",value:function(){return 0==this.mobs.length}},{key:"setPath",value:function(t){this.path=t,this.distance=this.sumPath(t)}},{key:"sumPath",value:function(t){for(var e=0,n=1;n<t.length;n++)e+=Math.sqrt(Math.pow(t[n-1][0]-t[n][0],2)+Math.pow(t[n-1][1]-t[n][1],2));return e}},{key:"setMobs",value:function(t){this.mobs=t,this.startTime=0,this.spawned=[]}},{key:"spawnMobs",value:function(t){for(this.startTime+=t;this.mobs.length>0&&this.mobs[0][0]<=this.startTime;){var e=this.mobs[0][1];this.mobs.shift(),this.spawn(e)}}},{key:"spawn",value:function(t){var e=new t({x:0,y:0,width:0,height:0});e.scaleStats(this.scale),e.updatePosition([this.positionY,this.positionX]),e.setDistance(this.distance),e.setPath(this.path),this.stage.addActor(e,9),this.stage.addActive(e),e instanceof Yt&&(e.ctx=this.stage.fCanvas.getContext("2d")),this.spawned.push(e)}},{key:"mobsRemaining",value:function(){return this.mobs.length}}]),n}(Lt.Actor),Kt=function(t){it(n,t);var e=lt(n);function n(t,r,i,o,a){var s;return tt(this,n),rt(ut(s=e.call(this,{})),"update",(function(t){s.lifeTime=s.lifeTime-t,s.lifeTime<=0&&s.destroy(t)})),rt(ut(s),"destroy",(function(t){s.ctx.clearRect((s.x1+s.x2)/2,(s.y1+s.y2)/2,Math.abs(s.x2-s.x1),Math.abs(s.y2-s.y1)),s.stage.removeActor(ut(s))})),rt(ut(s),"render",(function(t){var e=s.lifeTime/s.maxLifeTime*254,n=Math.floor(e).toString(16),r="#"+n+n+n;s.ctx.strokeStyle=r,s.ctx.beginPath(),s.ctx.moveTo(s.x1,s.y1),s.ctx.lineTo(s.x2,s.y2),s.ctx.stroke()})),s.maxLifeTime=t,s.lifeTime=t,s.x1=r,s.y1=i,s.x2=o,s.y2=a,s}return n}(Lt.Actor),Vt=Object.freeze({HIGH_HP:"highestHP",LOW_HP:"lowestHP",NEAR:"nearest",FAR:"furthest"}),Zt=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{},t,r,null)),"update",(function(t){i.shotTimer+=t,i.shotTimer>i.atkspeed&&(i.shotTimer=i.atkspeed),null!=i.target&&i.target.isActive()&&!i.target.hasReachedGoal()&&!i.target.isDead()&&i.targetInRange()?null==i.target||(i.turnToTarget(i.target),i.shoot(t)):i.findTarget()})),rt(ut(i),"render",(function(t){})),rt(ut(i),"upgradeTower",(function(){})),i.atkspeed,i.atk,i.targetingMode=Vt.NEAR,i.range,i.aimAngle=0,i.target=null,i.shotTimer=0,i.level=1,i.effect=null,i}return nt(n,[{key:"targetInRange",value:function(){return Math.sqrt(Math.pow(this.positionX-this.target.positionX,2)+Math.pow(this.positionY-this.target.positionY,2))<=this.range}},{key:"shoot",value:function(t){this.shotTimer>=this.atkspeed&&(this.shotTimer-=this.atkspeed,this.fireBulletNoProjectile(),null!=this.effect&&this.effect.attach(this.target))}},{key:"fireBulletNoProjectile",value:function(){this.stage.addActor(new Kt(50,this.realX,this.realY,this.target.px+25,this.target.py+25),30),this.target.takeDamage(this.atk)}},{key:"turnToTarget",value:function(t){var e=t.getPosition(),n=[this.positionY,this.positionX];n[1]-e[1]==0?n[0]-e[0]>=0?this.aimAngle=.5*Math.PI:this.aimAngle=1.5*Math.PI:this.aimAngle=Math.atan((n[0]-e[0])/(n[1]-e[1]))}},{key:"findTarget",value:function(){var t=this.findInRadius(this.stage.getActiveEnemies());this.target=this.prioritizeTarget(t)}},{key:"findInRadius",value:function(t){var e=this,n=this.positionX,r=this.positionY,i=[];return t.forEach((function(t){var o=t.positionX,a=t.positionY;Math.sqrt(Math.pow(o-n,2)+Math.pow(a-r,2))<=e.range&&i.push(t)})),i}},{key:"prioritizeTarget",value:function(t){var e=t[0];switch(this.targetingMode){case Vt.LOW_HP:t.forEach((function(t){t.hp<e.hp&&(e=t)}));break;case Vt.HIGH_HP:t.forEach((function(t){t.hp>e.hp&&(e=t)}));break;case Vt.NEAR:t.forEach((function(t){t.distance<e.distance&&(e=t)}));break;case Vt.FAR:t.forEach((function(t){t.distance>e.distance&&(e=t)}))}return e}},{key:"setMode",value:function(t){this.targetingMode=t}},{key:"setRange",value:function(t){this.range=t}}]),n}(Ct),Qt=function(t){it(n,t);var e=lt(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return tt(this,n),(r=e.call(this,"div")).lifetime=i,r.changeText(t),r.init(),r.intro(),r.outro(),r}return nt(n,[{key:"init",value:function(){this.applyStyles({opacity:1,fontSize:"30px"})}},{key:"intro",value:function(){}},{key:"outro",value:function(){var t=1,e=window.setInterval(function(){t<=0&&(window.clearInterval(e),this.gui.removeInterface(this)),this.applyStyles({opacity:t}),t-=1/60}.bind(this),this.lifetime/60)}}]),n}(qt),Jt=function(t){it(n,t);var e=lt(n);function n(){var t;return tt(this,n),rt(ut(t=e.call(this,{})),"update",(function(e){t.enabled&&t.waveStep!=t.waves.length&&t.waveCompleted()&&(t.stage.gui.addInterface(new Qt("starting wave "+(t.waveStep+1))),console.log("starting wave "+t.waveStep),t.startWave(),t.enabled=!1)})),t.spawners=[],t.waveStep=0,t.waves=[],t.enabled=!1,t}return nt(n,[{key:"startWave",value:function(){for(var t=0;t<this.spawners.length;t++)this.spawners[t].setMobs(this.waves[this.waveStep][t]),this.spawners[t].updateScale(this.waveStep);this.waveStep++}},{key:"setWaves",value:function(t){this.waves=t,this.waveStep=0}},{key:"setSpawners",value:function(t){this.spawners=t}},{key:"waveCompleted",value:function(){for(var t=0;t<this.spawners.length;t++)if(!this.spawners[t].mobsExhausted())return!1;return!0}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"isEnabled",value:function(){return this.enabled}}]),n}(Lt.Actor),te=function(t){it(n,t);var e=lt(n);function n(){var t;return tt(this,n),(t=e.call(this,{})).inventory=[],t}return nt(n,[{key:"buy",value:function(t){return this.spendMoney(this.selection[t].cost),this.selection[t]}},{key:"addInventoryItem",value:function(t,e){}},{key:"sell",value:function(t){this.gainMoney(t.cost/2)}},{key:"getCost",value:function(t){return this.selection[t].cost}}]),n}(Lt.Actor),ee=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,t,r)),"render",(function(t){i.ctx.fillStyle="lightblue",i.ctx.fillRect(i.realX-24,i.realY-24,49,49),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("L",i.realX,i.realY+10),i.ctx.strokeStyle="white",i.ctx.beginPath(),i.ctx.arc(i.realX,i.realY,50*i.range,0,2*Math.PI),i.ctx.stroke()})),rt(ut(i),"upgrade",(function(){i.level<4&&(i.atk+=1,i.range+=.5,i.atkspeed-=20,i.level+=1)})),i.atkspeed=70,i.atk=3,i.range=3,i.cost=50,i}return n}(Zt),ne=function(){function t(e,n,r){tt(this,t),this.name=e,this.modifier=n,this.value=r,this.maxTime=2e3}return nt(t,[{key:"attach",value:function(t){"def"==this.modifier&&(t.def=this.value),"speed"==this.modifier&&(t.speed=this.value);for(var e=!1,n=0;n<t.effectsList.length;n++)if(t.effectsList[n].effect.name==this.name){e=!0;break}0==e&&t.effectsList.push({effect:this,time:0})}}]),t}(),re=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,t,r)),"render",(function(t){i.ctx.fillStyle="orange",i.ctx.fillRect(i.realX-24,i.realY-24,49,49),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("H",i.realX,i.realY+10),i.ctx.strokeStyle="white",i.ctx.beginPath(),i.ctx.arc(i.realX,i.realY,50*i.range,0,2*Math.PI),i.ctx.stroke()})),rt(ut(i),"upgrade",(function(){i.level<4&&(i.atk+=2,i.range+=.5,i.atkspeed-=40,i.level+=1)})),i.atkspeed=450,i.atk=15,i.range=6,i.cost=75,i.effect=new ne("slow","speed",1e-9),i}return n}(Zt),ie={name:"monkey-student",properties:{},states:{idle:{location:"http://localhost:5000/spriteAssets/students/Code-Monkey.png",rps:5,loop:!0,frames:[{x:3,y:3,width:32,height:32},{x:32,y:1,width:32,height:32},{x:0,y:32,width:32,height:32},{x:32,y:32,width:32,height:32}]}}},oe=function(t){it(n,t);var e=lt(n);function n(t){return tt(this,n),e.call(this,t,4,.02,2,ie)}return n}(Yt),ae={name:"grill-student",properties:{},states:{idle:{location:"http://localhost:5000/spriteAssets/students/grill_walking.png",rps:5,loop:!0,frames:[{x:3,y:3,width:32,height:32},{x:32,y:1,width:32,height:32},{x:0,y:32,width:32,height:32},{x:32,y:30,width:32,height:32}]}}},se=function(t){it(n,t);var e=lt(n);function n(t){return tt(this,n),e.call(this,t,15,.005,.1,ae)}return n}(Yt),ue={name:"normie-student",properties:{},states:{idle:{location:"http://localhost:5000/spriteAssets/students/rye_walking.png",rps:5,loop:!0,frames:[{x:3,y:3,width:32,height:32},{x:32,y:1,width:32,height:32},{x:0,y:32,width:32,height:32},{x:32,y:32,width:32,height:32}]}}},ce=function(t){it(n,t);var e=lt(n);function n(t){return tt(this,n),e.call(this,t,5,.01,7,ue)}return n}(Yt),le={name:"weeb-student",properties:{},states:{idle:{location:"http://localhost:5000/spriteAssets/students/weeb_walking.png",rps:5,loop:!0,frames:[{x:3,y:3,width:32,height:32},{x:32,y:1,width:32,height:32},{x:0,y:32,width:32,height:32},{x:32,y:30,width:32,height:32}]}}},he=function(t){it(n,t);var e=lt(n);function n(t){var r;return tt(this,n),(r=e.call(this,t,6,.02,0,le)).states=le.states,r}return n}(Yt),fe=function(t){it(n,t);var e=lt(n);function n(t,r,i){var o;return tt(this,n),(o=e.call(this,"button")).changePosition(t,r),o.changeText(i),o.attachHandler(),o}return nt(n,[{key:"handler",value:function(){}},{key:"attachHandler",value:function(){this.element.removeEventListener("click",this.handler),this.element.addEventListener("click",this.handler.bind(this))}},{key:"changePosition",value:function(t,e){this.applyStyles({position:"fixed",top:"".concat(e,"px"),left:"".concat(t,"px")})}}]),n}(qt),de=function(t){it(n,t);var e=lt(n);function n(t,r,i,o){var a;return tt(this,n),(a=e.call(this,t,r,i)).tower=o,a}return nt(n,[{key:"handler",value:function(){console.log("selected "+this.text),this.stage.selectBuyTower(this.tower)}}]),n}(fe),pe=function(t){it(n,t);var e=lt(n);function n(t,r,i,o){var a;return tt(this,n),(a=e.call(this,t,r,i)).tower=o,a}return nt(n,[{key:"handler",value:function(){console.log("Pressed start"),this.stage.startWave()}}]),n}(fe),ve=function(){function t(e,n){tt(this,t),this.element=e,this.stage=n}return nt(t,[{key:"addInterface",value:function(t){this.element.appendChild(t.element),t.stage=this.stage,t.gui=this,t.create&&t.create()}},{key:"removeInterface",value:function(t){this.element.removeChild(t.element)}}]),t}(),ye=function(t){it(n,t);var e=lt(n);function n(t,r,i,o,a){var s;tt(this,n),(s=e.call(this,t,r,i)).subButtons=[];for(var u=0;u<a.length;u++)s.subButtons.push(new de(t,r+50*(u+1),o[u],a[u])),s.subButtons[u].applyStyles({position:"fixed",display:"none"});return s.toggle=!1,s}return nt(n,[{key:"handler",value:function(){this.toggle=!this.toggle;for(var t=0;t<this.subButtons.length;t++)this.subButtons[t].applyStyles({display:this.toggle?"block":"none"})}},{key:"create",value:function(){for(var t=0;t<this.subButtons.length;t++)this.gui.addInterface(this.subButtons[t])}}]),n}(fe),ge=function(t){it(n,t);var e=lt(n);function n(t,r,i,o){var a;tt(this,n),(a=e.call(this,t,r,i)).overlay=new qt("div"),a.overlay.applyStyles({position:"absolute",width:"".concat(200,"px"),height:"".concat(150,"px"),top:"".concat(150,"px"),left:"".concat(150,"px"),background:"white"}),a.overlay.element.style.zIndex="100",a.subButtons=[];for(var s=0;s<o.length;s++){var u=new fe(t,r+50*(s+1),o[s]);a.subButtons.push(u),a.subButtons[s].applyStyles({position:"fixed",display:"none",width:"75px"}),a.overlay.element.appendChild(document.createTextNode(u))}return a.toggle=!1,a}return nt(n,[{key:"handler",value:function(){this.toggle=!this.toggle;for(var t=0;t<this.subButtons.length;t++)this.subButtons[t].applyStyles({display:this.toggle?"block":"none"});this.overlay.applyStyles({display:this.toggle?"block":"none"})}},{key:"create",value:function(){for(var t=0;t<this.subButtons.length;t++)this.gui.addInterface(this.subButtons[t])}}]),n}(fe),me=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{},t,r,null)),"render",(function(t){i.ctx.fillStyle="#3F3F3F",i.ctx.fillRect(i.realX-25,i.realY-25,50,50),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("B",i.realX,i.realY+8)})),i.cost=10,i}return n}(Ct),we=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{},t,r,[[1,1]])),"render",(function(t){i.ctx.fillStyle="#4F4F4F",i.ctx.fillRect(i.realX-25,i.realY-25,100,50),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("B",i.realX+25,i.realY+8)})),i.cost=15,i}return n}(Ct),xe=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),rt(ut(i=e.call(this,{},t,r,[[1,1],[1,1]])),"render",(function(t){i.ctx.fillStyle="#6F6F6F",i.ctx.fillRect(i.realX-25,i.realY-25,100,100),i.ctx.fillStyle="white",i.ctx.font="20px Arial",i.ctx.textAlign="center",i.ctx.fillText("B",i.realX+25,i.realY+8+25)})),i.cost=25,i}return n}(Ct),be=function(t){it(n,t);var e=lt(n);function n(t,r){var i;return tt(this,n),(i=e.call(this,t)).fCanvas=r,i.player=new Wt(500,500),i.shop=new te,i.spawners=[],i.waveTimer=null,i.pather=null,i.events=0,i.matrix=null,i.ownershipMatrix=null,i.towers=[],i.buttons=[],i.images=[],i.activeEnemies=[],i.gui=new ve(document.querySelector(".ui"),ut(i)),i}return nt(n,[{key:"createDemoWorld",value:function(){this.matrix=[[3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,0,1,0,0],[0,0,1,0,0,1,0,1,0,0,0,0],[0,0,0,0,0,0,0,1,0,1,0,0],[0,1,0,0,0,1,0,0,0,0,0,1],[0,0,0,0,0,0,0,1,0,0,0,0],[0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,1,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2]],this.waveTimer=new Jt,this.ownershipMatrix=[];for(var t=0;t<this.matrix.length;t++){for(var e=[],n=0;n<this.matrix[0].length;n++)if(1==this.matrix[t][n]){var r=new Dt(n,t);this.tryAddNewTerrainBlocker(r),e.push(r),this.addActor(r,5)}else if(2==this.matrix[t][n]){var i=new Nt(n,t);e.push(i),this.addActor(i,8)}else if(3==this.matrix[t][n]){var o=new Ut(n,t);o.setScaleFunction(this.simpleScale),e.push(o),this.addActor(o,8),this.spawners.push(o)}else e.push(null);this.ownershipMatrix.push(e)}var a=this.generateSpawnList(50,this.spawners.length,6,1e3,[oe,ce,se,he]);console.log(a.length+" waves"),this.pathSpawners(),this.waveTimer.setSpawners(this.spawners),this.waveTimer.setWaves(a),this.addActor(this.waveTimer,0);for(var s=0;s<=600;s+=50){for(var u=0;u<=600;u+=50)this.addActor(new Bt({x:s-25,y:u-25,width:2,height:2}),0);this.addActor(new Xt({x:s,y:0,width:1,height:600}),22),this.addActor(new Xt({x:0,y:s,width:600,height:1}),22)}this.addActor(new It({x:0,y:0,width:600,height:600}),-1),this.tryAddNewTerrainBlocker(new ee(1,3)),this.tryAddNewTerrainBlocker(new re(10,4)),this.gui.addInterface(this.player.wallet),this.gui.addInterface(this.player.lifeCounter),this.addActor(this.player),this.createInputhandler(),this.createButtons()}},{key:"blockIsAvailable",value:function(t,e){return 0==this.matrix[e][t]&&null==this.ownershipMatrix[e][t]}},{key:"createButtons",value:function(){var t=new ye(680,65,"Towers",["Light Tower","Heavy Tower"],[ee,re]);this.gui.addInterface(t),this.buttons.push(t),t=new pe(680,635,"Start Wave"),this.gui.addInterface(t),this.buttons.push(t),t=new ye(680,310,"Obstacles",["Small","Medium","Large"],[me,we,xe]),this.gui.addInterface(t),this.buttons.push(t),t=new ge(200,635,"Options",["Resume","Pause","Restart","Quit","Help"]),this.gui.addInterface(t),this.buttons.push(t)}},{key:"startWave",value:function(){this.waveTimer.waveCompleted()&&this.waveTimer.enable()}},{key:"simpleScale",value:function(t){return 1+.2*t}},{key:"addActive",value:function(t){this.activeEnemies.push(t)}},{key:"removeActive",value:function(t){var e=this.activeEnemies.indexOf(t);console.log(e),e>-1&&this.activeEnemies.splice(e,1)}},{key:"generateSpawnList",value:function(t,e,n,r,i){for(var o=[],a=0;a<t;a++){for(var s=[],u=0;u<e;u++){for(var c=[],l=i[Math.floor(Math.random()*i.length)],h=0;h<n;h++)c.push([r*h,l]);s.push(c)}o.push(s)}return o}},{key:"enemyReachedGoal",value:function(){this.player.isDead()||this.player.damage(1),this.events++}},{key:"enemyKilled",value:function(t){this.player.isDead()||this.player.gainMoney(t),this.events++}},{key:"playerKilled",value:function(){console.log("Player has died..."),this.waveTimer.disable()}},{key:"getActiveEnemies",value:function(){return this.activeEnemies}},{key:"tryAddNewTerrainBlocker",value:function(t){var e=t.positionX,n=t.positionY,r=t.getSpace();if(!this.probeMassBlockage(e,n,r))return!1;this.addActor(t,10),t instanceof Zt&&this.towers.push(t);for(var i=0;i<r.length;i++)for(var o=0;o<r[0].length;o++)this.matrix[n+i][e+o]=1,this.ownershipMatrix[n+i][e+o]=t;return this.pathSpawners(),!0}},{key:"probeMassBlockage",value:function(t,e,n){if(e+n.length>this.matrix.length||t+n[0].length>this.matrix[0].length)return!1;for(var r=this.cloneMatrix(this.matrix),i=0;i<n.length;i++)for(var o=0;o<n[0].length&&0!=n[i][o];o++){if(1==n[i][o]&&0==r[i+e][o+t]){r[i+e][o+t]=1;break}return!1}var a=new Ft;a.initializeGraph(r);for(var s=0;s<this.spawners.length;s++)if(null==a.findShortestPathToEnds(this.spawners[s].getPosition()[0],this.spawners[s].getPosition()[1]))return!1;return!0}},{key:"cloneMatrix",value:function(t){for(var e=[],n=0;n<t.length;n++){for(var r=[],i=0;i<t.length;i++)r.push(t[n][i]);e.push(r)}return e}},{key:"pathSpawners",value:function(){var t=new Ft;t.initializeGraph(this.matrix);for(var e=0;e<this.spawners.length;e++)this.spawners[e].setPath(t.findShortestPathToEnds(this.spawners[e].getPosition()[0],this.spawners[e].getPosition()[1]))}},{key:"playerInteract",value:function(t,e){if(0==this.matrix[e][t]&&this.waveTimer.waveCompleted())if(null==this.player.blockerSelect)this.gui.addInterface(new Qt("Select a tower to purchase"));else{var n=new this.player.blockerSelect(t,e);this.player.getMoney()>=n.cost?this.tryAddNewTerrainBlocker(n)?this.player.spendMoney(n.cost):this.gui.addInterface(new Qt("Can't block enemy path")):this.gui.addInterface(new Qt("Need "+n.cost+" money to buy turret"))}else if(1==this.matrix[e][t]){var r=this.getTower(t,e);null==r||(this.player.getMoney()>=20?(this.upgradeTower(r),this.player.spendMoney(20)):this.gui.addInterface(new Qt("Need 20 money to upgrade a turret")))}}},{key:"upgradeTower",value:function(t){t.atk+=1,t.range+=.5}},{key:"getTower",value:function(t,e){for(var n=0;n<this.towers.length;n++){var r=this.towers[n];if(r.positionX==t&&r.positionY==e)return r}return null}},{key:"checkButtons",value:function(t){for(var e=0;e<this.buttons.length;e++)this.buttons[e].isClicked(t[0],t[1])&&this.buttons[e].activate()}},{key:"createInputhandler",value:function(){var t=this;new Lt.InputHandler(document.querySelector("body"),{mousedown:function(){var e=t.getMouseXYSector(this);t.isValidSector(e)&&t.playerInteract(e[0],e[1])}}).startHandler()}},{key:"selectBuyTower",value:function(t){this.selectBuyBlocker(t)}},{key:"selectBuyBlocker",value:function(t){console.log(t),this.player.blockerSelect=t}},{key:"isValidSector",value:function(t){return t[0]>=0&&t[0]<=11&&t[1]>=0&&t[1]<=11}},{key:"translateSectorToCoord",value:function(t){return[50*t[0],50*t[1]]}},{key:"getMouseXYSector",value:function(t){return[Math.floor(t.input.x/50),Math.floor(t.input.y/50)]}},{key:"getMouseXY",value:function(t){return[t.input.x,t.input.y]}}]),n}(Lt.Stage);function ke(e){let n,r,i,o,a,l,f,p,v;return{c(){n=c("canvas"),o=h(),a=c("canvas"),p=h(),v=c("div"),d(n,"class","back svelte-x6h4lm"),d(n,"width",r=window.innerWidth),d(n,"height",i=window.innerHeight),d(a,"class","fore svelte-x6h4lm"),d(a,"width",l=window.innerWidth),d(a,"height",f=window.innerHeight),d(v,"class","ui svelte-x6h4lm")},m(t,r){s(t,n,r),e[4](n),s(t,o,r),s(t,a,r),e[5](a),s(t,p,r),s(t,v,r)},p:t,i:t,o:t,d(t){t&&u(n),e[4](null),t&&u(o),t&&u(a),e[5](null),t&&u(p),t&&u(v)}}}function Se(t,e,n){let r,i;var o;return o=()=>{let t=new be(r,i);t.createDemoWorld(),t.start(),console.log("START")},y().$$.on_mount.push(o),[r,i,void 0,void 0,function(t){x[t?"unshift":"push"](()=>{n(0,r=t)})},function(t){x[t?"unshift":"push"](()=>{n(1,i=t)})}]}var Ee={"/":class extends B{constructor(t){super(),Y(this,t,null,J,o,{})}},"/towerdefence":class extends B{constructor(t){super(),Y(this,t,Se,ke,o,{})}}};function Ae(e){let n;const r=new Q({props:{routes:Ee}});return{c(){C(r.$$.fragment)},m(t,e){D(r,t,e),n=!0},p:t,i(t){n||(L(r.$$.fragment,t),n=!0)},o(t){I(r.$$.fragment,t),n=!1},d(t){N(r,t)}}}return new class extends B{constructor(t){super(),Y(this,t,null,Ae,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
